<html>
<head>
  <title>Tic-Tac-Toe</title>
  <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">
  <!-- <link rel="stylesheet" type="text/css" href="assets/css/bootstrap-reboot.min.css"> -->
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">
  <!-- <script type="text/javascript" src="assets/js/ttt.js"></script> -->

  <meta charset="ISO-8859-1">

</head>
<body>
  <!-- <h1>Tic Tac Toe</h1> -->
  <div class="container">
    <div class="row">
      <div class="col-md-6 offset-md-3">

        <!-- <table id="table" class="table table-bordered text-center tableStyle"> -->
        <table id="table">
          <caption>Tic-Tac-Toe</caption>
          <thead></thead>
          <tbody>
            <tr>
              <td id="id0"></td>
              <td id="id1"></td>
              <td id="id2"></td>
            </tr>
            <tr>
              <td id="id3"></td>
              <td id="id4"></td>
              <td id="id5"></td>
            </tr>
            <tr>
              <td id="id6"></td>
              <td id="id7"></td>
              <td id="id8"></td>
            </tr>
          </tbody>
          <tfoot></tfoot>
        </table>

        <p id="board"></p>
        <button id="reset">Reset</button>
        <button id="reset">&#10006;</button>
        <button id="reset">&#9760;</button>
        <button id="reset">&#10010;</button>

<script type="text/javascript">

// var initBoard = function() {
//   var setListeners = [];
//   for ( var i = 0; i < 9; i++ ) {
//     setListeners.push('id'+i+' = document.getElementById("id'+i+'");');
//     setListeners.push('id'+i+'.addEventListener( "click", changeCell );');
//   }
//   for ( var listener of setListeners ) { eval( listener ); }
// }();
// initBoard();

// var x_start_pattern = [ 1,2,3,4,5,6,7,8,9 ];
var X = x = "X", O = o = "O";
var x_start_patternCnt = 0;
var x_start_pattern = [ x, o ];

var selectCell = function() {
  var setValue = x_start_pattern[x_start_patternCnt];
  x_start_patternCnt = (x_start_patternCnt + 1) % x_start_pattern.length;
  return setValue;  
}

var recordCell = function(id, setValue) {
    board[id] = setValue;
}

var tallyWins = function(id, setValue) {
  for ( var i = 0; i < tallyWinsBoard.length; i++ ) {
    for ( var cellID in tallyWinsBoard[i] ) {
      if ( cellID == id ){
        tallyWinsBoard[i][cellID] = setValue;
      }
    }
  }
}

var changeCell = function(e) {
  if ( e.target.textContent != "" ) {
    alert("Cell taken, pick another cell.")
  } else {
    var id = e.target.id;
    var setValue = selectCell();
    recordCell(id, setValue);
    tallyWins(id, setValue);
    // e.target.textContent = tallyWinsBoard[id][cellID];
    e.target.textContent = board[id];
    evalTheBoard(tallyWinsBoard);
  }
}

var id0, id1, id2, id3, id4, id5, id6, id7, id8;
var board = { id0 : "",
              id1 : "",
              id2 : "",
              id3 : "",
              id4 : "",
              id5 : "",
              id6 : "",
              id7 : "",
              id8 : "" };

var tallyWinsBoard = [
  { id0 : "", id1 : "", id2 : "" },
  { id3 : "", id4 : "", id5 : "" },
  { id6 : "", id7 : "", id8 : "" },
  { id0 : "", id3 : "", id6 : "" },
  { id1 : "", id4 : "", id7 : "" },
  { id2 : "", id5 : "", id8 : "" },
  { id0 : "", id4 : "", id8 : "" },
  { id2 : "", id4 : "", id6 : "" }
];

var evalTheBoard = function(tallyWinsBoard) {
  for ( var i = 0; i < 8; i++ ) {
    var y = Object.entries(tallyWinsBoard[i]);
    evalWin(y);
    // console.log(y);
  }
}

var evalWin = function( y ) {
  this.y = y;
  // console.log(y);
  var a = y[0][1];
  var b = y[1][1];
  var c = y[2][1];
    if ( a,b,c == 'X' ) {
    console.log("X, YOU WIN!!!");
  } else if ( a,b,c == 'O' ) {
    console.log("O, YOU WIN!!!");
  } else {
    console.log("No other options.")
  }
}

evalTheBoard(tallyWinsBoard);

// window.addEventListener( "load", function() {
// });

var initBoard = function() {
  id0 = document.getElementById("id0");
  id1 = document.getElementById("id1");
  id2 = document.getElementById("id2");
  id3 = document.getElementById("id3");
  id4 = document.getElementById("id4");
  id5 = document.getElementById("id5");
  id6 = document.getElementById("id6");
  id7 = document.getElementById("id7");
  id8 = document.getElementById("id8");
}
initBoard();

  id0.addEventListener( "click", changeCell );
  id1.addEventListener( "click", changeCell );
  id2.addEventListener( "click", changeCell );
  id3.addEventListener( "click", changeCell );
  id4.addEventListener( "click", changeCell );
  id5.addEventListener( "click", changeCell );
  id6.addEventListener( "click", changeCell );
  id7.addEventListener( "click", changeCell );
  id8.addEventListener( "click", changeCell );



// var setListeners = [];
// for ( var i = 0; i < 9; i++ ) {
//   setListeners.push('var id' + i + ' = document.getElementById("' + i + '");');
//   setListeners.push('id' + i + '.addEventListener("click", function() {' + 'id' + i + '.innerHTML = changeXO();' + '},);');
// }
// for ( var listener of setListeners ) { eval( listener ); }


// function changeBackgroundColor() {
//   var colors = [ "red", "blue", "yellow", "white", "green", "pink", "aqua", "orange", "purple"];
//   var colorsCnt = 0;
//   document.addEventListener("click", function(){
//     document.body.style.backgroundColor = colors[colorsCnt];
//     colorsCnt = (colorsCnt+1) % colors.length;
//   });
// }
// changeBackgroundColor();

</script>

      </div><!-- .col-md-6 -->
    </div><!-- .row -->
  </div><!-- .container -->
</html>